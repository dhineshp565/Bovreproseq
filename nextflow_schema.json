{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/Bovreproseq//nextflow_schema.json",
  "title": "Bovreproseq pipeline parameters",
  "description": "Pipeline for generating results from targeted amplicon sequencing of Bovine reproductive pathogens",
  "type": "object",
  "$defs": {
    "input_output_options": {
      "title": "Input/output options",
      "type": "object",
      "fa_icon": "fas fa-terminal",
      "description": "Define where the pipeline should find input data and save output data.",
      "required": ["input", "out_dir", "kraken_db"],
      "properties": {
        "input": {
          "type": "string",
          "format": "directory-path",
          "exists": true,
          "schema": "assets/schema_input.json",
          "description": "Path to input directory containing the sub-directories with fastq files\ne.g. fastq_pass/PDS123456/...fastq.gz",
          "fa_icon": "fas fa-folder-open",
          "default": "filepath"
        },
        "out_dir": {
          "type": "string",
          "format": "directory-path",
          "fa_icon": "fas fa-folder",
          "description": "Path to output directory"
        },
        "kraken_db": {
          "type": "string",
          "format": "directory-path",
          "fa_icon": "fas fa-database",
          "description": "Path to kraken2 database"
        }
      }
    },
    "optional": {
      "title": "Optional",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "read_count_threshold": {
          "type": "integer",
          "default": 10,
          "help_text": "Read count threshold - Number of reads to classify sample as positive or negative",
          "enum": [10, 15, 20, 25]
        },
        "trim_barcodes": {
          "type": "string",
          "help_text": "Select Yes to enable trimming adapter and barcode sequences using porechop",
          "enum": ["Yes"]
        },
        "medaka_model": {
          "type": "string",
          "default": "r1041_e82_400bps_sup_g615",
          "help_text": "Choose medaka model for polishing consensus"
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/$defs/input_output_options"
    },
    {
      "$ref": "#/$defs/optional"
    }
  ]
}
